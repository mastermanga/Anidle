function guessAnime() {
  if (gameOver) return;

  const input = document.getElementById("animeInput").value.trim();
  const guessedAnime = animeData.find(a => a.title.toLowerCase() === input.toLowerCase());

  if (!guessedAnime) {
    alert("Anime non trouvÃ© !");
    return;
  }

  attemptCount++;
  document.getElementById("counter").textContent = "Tentatives : " + attemptCount;

  const results = document.getElementById("results");

  // Ajouter l'en-tÃªte une seule fois
  if (attemptCount === 1) {
    const header = document.createElement("div");
    header.classList.add("row");
    ["Titre", "Saison", "Studio", "Genre", "ThÃ¨me", "Score"].forEach(label => {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.style.fontWeight = "bold";
      cell.textContent = label;
      header.appendChild(cell);
    });
    results.appendChild(header);
  }

  const row = document.createElement('div');
  row.classList.add('row');

  ['title', 'season', 'studio', 'genre', 'theme', 'score'].forEach(key => {
    const cell = document.createElement('div');
    cell.classList.add('cell');

    if (key !== 'score') {
      const isMatch = guessedAnime[key] === targetAnime[key];
      cell.classList.add(isMatch ? 'green' : 'red');
      cell.textContent = guessedAnime[key];
    } else {
      const guessedScore = parseFloat(guessedAnime.score);
      const targetScore = parseFloat(targetAnime.score);

      if (guessedScore === targetScore) {
        cell.classList.add('green');
        cell.textContent = guessedScore;
      } else {
        const direction = guessedScore < targetScore ? "ðŸ”¼" : "ðŸ”½";
        cell.textContent = `${guessedScore} ${direction}`;
      }
    }

    row.appendChild(cell);
  });

  results.appendChild(row);
  document.getElementById("animeInput").value = "";
  document.getElementById("suggestions").innerHTML = "";

  if (guessedAnime.title === targetAnime.title) {
    gameOver = true;
    document.getElementById("animeInput").disabled = true;

    const message = document.createElement("div");
    message.id = "winMessage";
    message.innerHTML = `ðŸŽ† <span style="font-size:2rem;">ðŸ¥³</span> Bravo ! C'Ã©tait <u>${targetAnime.title}</u> en ${attemptCount} tentative${attemptCount > 1 ? 's' : ''}. <span style="font-size:2rem;">ðŸŽ‰</span>`;
    document.getElementById("results").appendChild(message);
    launchFireworks();
  }
}

</html>

